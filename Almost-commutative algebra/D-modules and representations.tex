\chapter{D-modules in geometric representation theory}
    \begin{abstract}
        
    \end{abstract}
    
    \minitoc
    
    \begin{convention}[Everything is derived!] \label{conv: D_modules_everything_is_derived}
        \noindent
        \begin{itemize}
            \item From now on until the end of the chapter, everything will be assumed to be derived. 
            \item By $\Cat_1$, or simply $\Cat$, we shall actually mean $(\infty, 1)\-\Cat_1$, i.e. the $(\infty, 1)$-category of $(\infty, 1)$-categories and functors between them, and by $\Cat_2$ we will be referring to the $(\infty, 2)$-category of $(\infty, 1)$-categories, functors between them, and natural transformations between these functors. 
            
            Similarly, by $\Grpd^1$, or simply $\Grpd$, we will actually mean the $(\infty, 1)$-category of $\infty$-groupoids and functors between them, and by $\Grpd^2$, we shall mean the $(\infty, 2)$-category of $\infty$-groupoids, functors between them, and natural transformations between these functors.
            \item A subcategory of $\Cat$ this is of particular interest is $\dg\Cat^{\cont}_2$ (or simply $\dg\Cat^{\cont}$), the $(\infty, 2)$-category of stable linear (i.e. differential-graded) $(\infty, 1)$-categories (see section \ref{section: homological_algebra} for the notion of stable $(\infty, 1)$-categories). Of course, we can also view $\dg\Cat^{\cont}$ as a mere $(\infty, 1)$-category; when necessary, we shall write $\dg\Cat^{\cont}_1$ to put emphasis on the disregard of $2$-morphisms.
        \end{itemize} 
    \end{convention}
    
    \section{D-modules over characteristic zero}
        In this section, we will be giving a demonstration of how the theory of ind-coherent sheaves on inf-schemes (cf. section \ref{section: formal_schemes_and_inf_schemes}) helps us define and describe D-modules as ind-coherent sheaves over a certain kind of prestacks, thereby naturally establishing the six-functor formalism \textit{\`a la} Grothendieck in a natural manner for D-modules, in the sense that, should a prestack $\calZ$ be sufficiently nice, one would even be able to figure out the behaviours of D-modules on $\calZ$ only from what one would expect from ind-coherent sheaves on $\calZ$. 
        
        Before submerging ourselves in the tecnnical details, let us first recall some notable features of the classical theory of D-modules (in the sense of say, Kashiwara), both to equip ourselves with an intuitive sense of purpose for our endeavour, as well as to justify this highly abstract alternative approach to D-modules. 
            \begin{enumerate}
                \item \textbf{(The classical theory):} Let $k$ be a field of characteristic $0$, and let $X$ be a scheme over $\Spec k$, which we will assume to be flat, proper, and of finite presentation for simplicity. If $X$ is smooth, then the relative cotangent complex $\bfL^*_{X/k}$ of $X/k$ shall be quasi-isomorphic to the zero complex (cf. definition \ref{def: cohomological_smoothness}), which means that the de Rham complex $\Omega^*_{X/k}$ attached to $X/k$ can only have non-zero terms in non-negative degrees; this, in turn, implies that the de Rham complex:
                    $$
                        \begin{tikzcd}
                        	0 & \E & {\Omega^1_{X/k} \tensor_{\calO_{X/k}} \E} & {\Omega^2_{X/k} \tensor_{\calO_{X/k}} \E} & {...}
                        	\arrow["\nabla", from=1-4, to=1-5]
                        	\arrow["\nabla", from=1-3, to=1-4]
                        	\arrow["\nabla", from=1-2, to=1-3]
                        	\arrow[from=1-1, to=1-2]
                        \end{tikzcd}
                    $$
                (henceforth abbreviated by $\E \tensor_{\calO_{X/k}} \Omega^*_{X/k}$) corresponding to any given \textit{flat} $\calO_{X/k}$-linear connection $\nabla: \E \to \Omega^1_{X/k} \tensor_{\calO_{X/k}} \E$ will also be concentrated in non-negative degrees. Recall also, that to specify a \textit{flat} $\calO_{X/k}$-linear connection $\nabla: \E \to \Omega^1_{X/k} \tensor_{\calO_{X/k}} \E$ on a $\calO_{X/k}$-vector bundle $\E$ over a smooth scheme $X/k$ is the same as specifying the structure of a left-$\D_{X/k}$-module on $\E$. Together, these two facts imply that the dg-category ${}^l\Dmod(X/k)$ of chain complexes of left-$\D_{X/k}$-modules is equivalent to the category whose objects are the de Rham complexes corresponding to flat connections on vector bundles over $X/k$, which we will denote by ${}^{\geq 0}\Vect(X/k)^{\nabla}_{\dR}$. As a consequence, given any smooth morphism:
                    $$f: X \to Y$$
                of schemes over $\Spec k$, one obtains a six-functor formalism between ${}^l\Dmod(X/k)$ and ${}^l\Dmod(Y/k)$ simply as that between ${}^{\geq 0}\Vect(X/k)^{\nabla}_{\dR}$ and ${}^{\geq 0}\Vect(Y/k)^{\nabla}_{\dR}$. While this is all well and good, categories of vector bundles equipped with flat connections (over smooth schemes) are rather unnatural as far as functorial constructions are concerned. 
                
                But what about cases wherein $X$ is not smooth ? In such a situation, one would embed $X$ into some smooth ambient scheme, say $Y$ (which can always be done, as one can take $X$ to be the affine singular locus and then embed that locus into a smooth deformation of its ambient scheme). Then, we can make use of what Kashiwara taught us, which is that regardless of our choice of embedding $X \hookrightarrow Y$, the restriction ${}^l\Dmod(Y/k)|_X$ of the category of left-$\D_{Y/k}$-modules onto objects (set-theoretically) supported on $X$ will be the same. Choosing such an embedding into a smooth scheme, however, would still involve appealing to resolutions, which is a rather unnatural procedure (at least from a $\infty$-categorical standpoint).
                
                Additionally, the relationship between left-D-module and right-D-modules is rather unclear within this classical framework (it turns out that via the dualising complex, left and right-D-modules are equivalent, but this does not excuse the fact that the correspondence seems rather unnatural).
                \item \textbf{(The new perspective):} Again, suppose that $k$ is a field (perhaps of characteristic $0$) and that $X$ is a scheme that is flat, proper, and of finite presentation over $\Spec k$.
                
                Let us firstly that a crystal in quasi-coherent modules over $X$ is one which is isomorphic to its restriction to the maximal reduced closed subscheme (note that $|X| \cong |{}^{\red}X|$; cf. example \ref{example: reducedeness_and_nilpotency}), which is to say that:
                    $$\E \cong \E|_{X_{\dR}}$$
                (here $X_{\dR}$ denotes the so-called \textbf{de Rham space} attached to $X$, which as a presheaf is given by $X_{\dR}(R) \cong X({}^{\red}R)$ for all commutative $k$-algebras $R$). Additionally, recall that to any crystal in quasi-coherent modules $\E \in \QCoh(X_{\dR}/k)$, one can canonically associate an $\calO_{X/k}$-linear flat connection:
                    $$\nabla: \E \to \Omega^1_{X/k} \tensor_{\calO_{X/k}} \E$$
                As stated above, when $X$ is smooth over $\Spec k$, this is the same as giving a left-$\D_{X/k}$-module, so for smooth schemes, one might as well define the dg-category of left-$\D_{X/k}$-modules to literally be the dg-category $\QCoh(X_{\dR}/k)$ of crystals in quasi-coherent modules over $X$; in fact, as schemes smooth over fields are \textit{a priori} reduced, ${}^l\Dmod(X/k)$ is nothing but $\QCoh(X/k)$.
                
                The nice thing about this approach is that we understand quasi-coherent sheaves very well, and better yet, the theory of quasi-coherent sheaves over schemes is essentially that of modules over commutative rings (cf. definition \ref{def: qcoh_def}). Moreover, it now makes sense to speak of D-modules over smooth algebraic stacks and so on (perhaps with some sort of properness or separatedness assumption imposed), as there is nothing preventing us from considering de Rham spaces attached to \textit{any presheaf} on $\Comm\Alg^{\op}$, as the definition is completely functorial. This is very useful, as there are many geometric objects which appear naturally in geometric representation theory yet are not schemes, such as the stack $\Bun_G(X)$ of principal $G$-bundles over a smooth curve $X$, for $G$ a reductive group; in fact, the so-called \say{Automorphic Side} of the Geometric Global Langlands Correspondence is the category of D-modules on this stack.
                \item \textbf{(What happens in positive characteristics ?):} The new perspective that we have just described is not without flaws, however. One of its most prominent shortcoming is that it fails completely when $k$ is instead of some positive characteristic $p$. In that situation, one can still attach to each crystal in quasi-coherent sheaves $\E$ - in a canonical manner - a flat connection $\nabla: \E \to \Omega^1_{X/k} \tensor_{\calO_{X/k}} \E$ that would generate a de Rham complex:
                    $$
                        \begin{tikzcd}
                        	0 & \E & {\Omega^1_{X/k} \tensor_{\calO_{X/k}} \E} & {\Omega^2_{X/k} \tensor_{\calO_{X/k}} \E} & {...}
                        	\arrow["\nabla", from=1-4, to=1-5]
                        	\arrow["\nabla", from=1-3, to=1-4]
                        	\arrow["\nabla", from=1-2, to=1-3]
                        	\arrow[from=1-1, to=1-2]
                        \end{tikzcd}
                    $$
                (see \cite[\href{https://stacks.math.columbia.edu/tag/07J5}{Tag 07J5}]{stacks} for details). However, a crystal in quasi-coherent sheaves is now no longer simply an object of $\QCoh(X_{\dR}/k)$, even when $X$ is smooth. \todo{Continue this}
            \end{enumerate}
                    
            \begin{convention}
                Until the end of this section, we shall be working over a field of characteristic $0$ ($k = \Q$ and $k = \bbC$ are cases of particular interest). Additionally, by \say{prestacks}, we shall always mean \say{prestacks fibred in $\infty$-groupoids}. Due to these reasons, the $\infty$-presheaf $\infty$-topos $\Spec k$ shall be denoted somewhat ambiguously by $\Pre\Stk$; likewise, by $\Comm\Alg$ we shall mean ${}^{k/}\Comm\Alg$ and by $\Sch$ (respectively $\Sch^{\aff}$), we shall mean $\Sch_{/\Spec k}$ (respectively $\Sch^{\aff}_{/\Spec k}$).
            \end{convention}
    
        \subsection{Crystals as sheaves}
            \subsubsection{The de Rham prestack}
                As eluded to in the preceding introduction, crystals (and hence D-modules) are sheaves of modules over so-called \textbf{de Rham spaces}. Therefore, before actually diving in, we shall need to study the geometry of these de Rham spaces.
            
                Before we introduce the notion of de Rham spaces attached to prestacks, however, let us make some remark regarding reduced commutative $k$-algebras. 
                \begin{remark}[Reduced affine schemes] \label{remark: reduced_affine_schemes}
                    \noindent
                    \begin{itemize}
                        \item \textbf{(Reduced rings):} Reduced objects of $\Comm\Alg$ are nothing but $0$-connective commutative $k$-algebras with vanishing nilradicals, i.e. they have no non-zero nilpotent elements, and because ring homomorphisms preserve $0$, a homomorphism:
                            $$\varphi: R \to S$$
                        between two reduced commutative $k$-algebras $R$ and $S$ will be nothing more than an ordinary algebra homomorphism. As a consequence, reduced $k$-algebras form a full subcategory of $\Comm\Alg$ (or for that matter, of ${}^{\leq 0}\Comm\Alg$); we shall denote it by ${}^{\leq 0}\Comm\Alg^{\red}$; note that $k$ itself, by virtue of being a field of characteristic $0$, is trivially reduced as an algebra over itself, and hence is still the initial object of ${}^{\leq 0}\Comm\Alg^{\red}$. 
                        \item \textbf{(Prestacks over reduced affine schemes):} The category of prestacks over ${}^{\leq 0}\Comm\Alg^{\red}$ shall be denoted by $\Pre\Stk|_{{}^{\leq 0}\Sch^{\aff, \red}}$. This is nothing but the domain restriction of the presheaf $\infty$-topos $\Pre\Stk$ (if we would view the assignment of $\infty$-presheaves $\infty$-topoi to $\infty$-categories as fibration $\Pre\Stk \to \Cat_1$) down from $\Comm\Alg^{\op}$ onto $({}^{\leq 0}\Comm\Alg^{\red})^{\op}$. 
                    \end{itemize}
                \end{remark}
                
                And now, the definition of de Rham spaces:
                \begin{definition}[de Rham prestacks] \label{def: de_rham_prestacks}
                    We can associate to any prestack $\calZ \in \Pre\Stk$ a prestack $\calZ_{\dR} \in \Pre\Stk$, called \textbf{the de Rham prestack attached to $\calZ$}, that is defined object-wise by the following formula:
                        $$\calZ_{\dR}(R) \cong \calZ({}^{\red}R)$$
                    where ${}^{\red}R$ is the classical commutative ring isomorphic to the quotient of the underlying classical commutative ring of $R$ by its nilradical. Note that this formula gives us a canonical arrow:
                        $$\calZ \to \calZ_{\dR}$$
                    coming from the canonical quotient map $R \to {}^{\red}R$. Sometimes de Rham prestacks might also go by the name \say{\textbf{de Rham spaces}}.
                \end{definition}
                \begin{remark}[Functoriality of de Rham prestacks] \label{remark: de_rham_prestacks_functoriality}
                    \noindent
                    \begin{enumerate}
                        \item Consider a morphism:
                            $$\calX \to \calY$$
                        between prestacks on $\Comm\Alg^{\op}$. It is not hard to show, via evaluation at quotients by nilradicals, that such a morphism induced a morphism of de Rham spaces:
                            $$\calX_{\dR} \to \calY_{\dR}$$
                        which tells us that there exists a so-called \textbf{de Rham space functor}:
                            $$\dR: \Pre\Stk|_{{}^{\leq 0}\Sch^{\aff, \red}} \to \Pre\Stk$$
                        that assigns de Rham spaces $\calZ_{\dR}$ to prestacks $\calZ \in \Pre\Stk|_{{}^{\leq 0}\Sch^{\aff, \red}}$. 
                        \item Due to the fact that limits and colimits of prestacks are computed object-wise, the functor $\dR$ commutes with all limits and colimits in $\Pre\Stk|_{{}^{\leq 0}\Sch^{\aff, \red}}$.
                    \end{enumerate}
                \end{remark}
                
                \begin{proposition}[The locally almost of finite type case] \label{prop: laft_de_rham_spaces}
                    If $\calZ$ is a prestack that is locally almost of finite type then so is its associated de Rham prestack $\calZ_{\dR}$. This is to say, the essential image of the functor:
                        $$\dR|_{\Pre\Stk^{\laft}}: \Pre\Stk^{\laft} \to \Pre\Stk$$
                    is a subcategory of $\Pre\Stk^{\laft}$.
                \end{proposition}
                    \begin{proof}
                        We will need to show that for all $\calZ \in \Pre\Stk^{\laft}$, the corresponding de Rham space $\calZ_{\dR}$ is convergent, and that for all $n \in \N$, the de Rham space $({}^{\leq n}\calZ)_{\dR}$ attached to the $n$-coconnective prestack ${}^{\leq n}\calZ \in {}^{\leq n}\Pre\Stk^{\laft}$ is also $n$-coconnective.
                            \begin{enumerate}
                                \item 
                                \item 
                            \end{enumerate}
                    \end{proof}
                
                \begin{remark}[Universal property of the de Rham space functor] \label{remark: universal_property_of_de_rham_spaces}
                    
                \end{remark}
                    
            \subsubsection{Left and right-crystals}
                \begin{definition}[Right-crystals] \label{def: right-crystals}
                    By composing $\dR: \Pre\Stk^{\laft} \to \Pre\Stk^{\laft}$ with the functor:
                        $$\Ind\Coh^!: (\Pre\Stk^{\laft})^{\op} \to \dg\Cat^{\cont}_1$$
                    one obtains a so-called functor of \textbf{right-crystals}:
                        $$\Crys^! \cong \Ind\Coh^! \circ \dR$$
                \end{definition}
        
        \subsection{Crystals as functors on the category of correspondences}
        
        \subsection{D-modules}
        
    \section{The Riemann-Hilbert Correspondence}
    
    \section{Localisations of Lie algebras}
        \subsection{The Borel-Weil-Bott Theorem}
            \begin{convention}
                \noindent
                \begin{itemize}
                    \item Throughout this subsection, we work over a ground field $k$ that is algebraically closed and of characteristic $0$. 
                    \item $X$ will always be a smooth algebraic variety over $\Spec k$.
                    \item $G$ will always be a connected algebraic group over $\Spec k$ that acts smoothly on $X$.
                \end{itemize}
            \end{convention}
            
            \subsubsection{Equivariant and twisted D-modules}
            
            \subsubsection{Cohomology of \texorpdfstring{$\D_{\lambda}$}{}-modules}
            
            \subsubsection{The Borel-Weil-Bott Theorem}
        
        \subsection{Localisation of \texorpdfstring{$\g$}{}-modules}
        
        \subsection{D-modules on the affine Grassmannians and representations of Kac-Moody algebras}
            \begin{convention}
                \noindent
                \begin{itemize}
                    \item We work with a complex algebraic group $G$ of adjoint type with \textit{a priori} simple Lie algebra $\g$, along with universal enveloping algebra $\U(\g)$ and centre $\scrZ(\g)$ thereof. $B$ shall be its Borel subgroup. 
                    \item $\Gr_G$ shall denote the loop affine Grassmannian $G(\!(t)\!)/G[\![t]\!]$ attached to $G$.
                \end{itemize}
            \end{convention}
            
        \subsection{Localisation of \texorpdfstring{$\hat{\g}$}{}-modules}
            \begin{convention}
                \noindent
                \begin{itemize}
                    \item We work with a simple complex algebraic group $G$ with Lie algebra $\g$, along with universal enveloping algebra $\U(\g)$ and centre $\scrZ(\g)$ thereof. $B$ shall be its Borel subgroup. 
                    \item $\Gr_G$ shall denote the loop affine Grassmannian $G(\!(t)\!)/G[\![t]\!]$ attached to $G$.
                \end{itemize}
            \end{convention}
            
            \subsubsection{The Hecke Category}
            
            \subsubsection{The Main Theorem}